<!DOCTYPE html>
<head>
    <meta charset="UTF-8" name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0, initial-scale=1">
    <link rel="stylesheet" href="style.css">
    <title>地球の歩き方</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>
    <script src='./sample.js'></script>
</head>
<body>
    <div class="arjs-loader">
    </div>
    <div class="searchBack">
        <img src="/map-5.png" alt="search">
        <p>地図を映してください</p>
    </div>
    <div class="modal">
        <div class="container">
            <span class="close" onClick="closeModal()">x</span>
            <img src="/liberty.jpg" alt="地図">
            <div class="contents">
                <h2>自由の女神</h2>
                <p>自由の女神像は、フランスの彫刻家フレデリック・オーギュスト・バルトルディが制作し、1886年にニューヨーク港に設置された銅像である。アメリカ合衆国とフランスの友好の印として、また自由の象徴として贈られた。</p>
                <button onClick="closeModal()">閉じる</button>
            </div>
        </div>
    </div>
    <a-scene
        vr-mode-ui="enabled: false;"
        renderer='antialias: true; alpha: true; precision: mediump;'
        embedded arjs='trackingMethod: best; sourceType: webcam; debugUIEnabled: false;'
    >
        <a-assets>
            <!-- <a-asset-item id="model" src="../resources/sample-entity.glb"></a-asset-item> -->
            <a-asset-item id="model" src="../resources/map.glb"></a-asset-item>
            <img id="tex-image" src="../resources/Map-COL.jpg">
        </a-assets>

        <!-- <a-nft
            samplehandler 
            type='nft' url="../resources/ramen-1000px"
            smooth="true" smoothCount="10" smoothTolerance="0.01" smoothThreshold="5"
        > -->
        <a-nft
            samplehandler 
            type='nft' url="/resources/nft/NYC_MAP_v3"
            smooth="true" smoothCount="10" smoothTolerance="0.01" smoothThreshold="5"
        >
            <!-- <a-entity modify-materials gltf-model="#model" material="src:#tex-image" play-all-model-animations="" position="0 0 0" rotation="0 0 0" scale="100 100 100" visible="true">
            </a-entity> -->
            <a-entity modify-materials gltf-model="#model" play-all-model-animations="" position="0 -200 -200" rotation="0 0 0" scale="300 300 300" visible="true">
            </a-entity>
        </a-nft>
		<a-entity camera></a-entity>
	</a-scene>
    <script>
        function openModal() {
            document.querySelector('.modal').style.display = 'block';
        }
        function closeModal() {
            document.querySelector('.modal').style.display = 'none';
        }
        // canvasをクリックしたらモーダルを開く
        document.querySelector('a-scene').addEventListener('click', openModal);


        setTimeout(() => {
            // instruction にフェードアウトクラスを追加
            document.querySelector('.arjs-loader').classList.add('fadeout');            
        }, 5000);
    </script>
</body>
